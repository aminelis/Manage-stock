{"ast":null,"code":"// reunionActions.js\nimport { ADD_PDT, FETCH_Pdts, SET_TOKEN, DELETE_REUNIONS, UPDATE_REUNIONS } from '../constants/constants';\nimport axios from 'axios';\nexport const login = (username, password, role) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post('https://localhost:7013/api/Auth/login', {\n        username,\n        password,\n        role\n      });\n      if (response.status === 200) {\n        const token = response.data.token;\n        dispatch(setToken(token));\n        console.log('New state after setting token:', getState());\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      // Gestion des erreurs\n    }\n  };\n};\nexport const setToken = token => {\n  return {\n    type: SET_TOKEN,\n    payload: token\n  };\n};\nexport const addPdt = product => {\n  return {\n    type: ADD_PDT,\n    payload: product\n  };\n};\n\n// Action creator pour récupérer les réunions depuis l'API\nexport const fetchPdt = token => {\n  return async dispatch => {\n    try {\n      // Effectuez votre appel à l'API ici\n      const response = await axios.get('https://localhost:7013/api/Product/GetProductsById', {\n        headers: {\n          Authorization: `Bearer ${token}` // Incluez le token JWT dans les en-têtes de la requête\n        }\n      });\n      dispatch({\n        type: FETCH_Pdts,\n        payload: response.data\n      });\n    } catch (error) {\n      console.error('Error fetching Produits:', error);\n    }\n  };\n};","map":{"version":3,"names":["ADD_PDT","FETCH_Pdts","SET_TOKEN","DELETE_REUNIONS","UPDATE_REUNIONS","axios","login","username","password","role","dispatch","response","post","status","token","data","setToken","console","log","getState","error","type","payload","addPdt","product","fetchPdt","get","headers","Authorization"],"sources":["/home/amine/product-list/src/Actions/PdtActions.js"],"sourcesContent":["// reunionActions.js\nimport { ADD_PDT, FETCH_Pdts,SET_TOKEN, DELETE_REUNIONS, UPDATE_REUNIONS } from '../constants/constants';\nimport axios from 'axios';\n\n\nexport const login = (username, password, role) => {\n  return async (dispatch) => {\n    try {\n      const response = await axios.post('https://localhost:7013/api/Auth/login', {\n        username,\n        password,\n        role\n      });\n      if (response.status === 200) {\n        const token = response.data.token;\n        dispatch(setToken(token)); \n        console.log('New state after setting token:', getState());\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      // Gestion des erreurs\n    }\n  };\n};\n\nexport const setToken = (token) => {\n  return {\n    type: SET_TOKEN,\n    payload: token\n  };\n};\n\nexport const addPdt = (product) => {\n  return {\n    type: ADD_PDT,\n    payload: product,\n  };\n};\n\n// Action creator pour récupérer les réunions depuis l'API\nexport const fetchPdt = (token) => {\n  return async (dispatch) => {\n    try {\n      // Effectuez votre appel à l'API ici\n      const response = await axios.get('https://localhost:7013/api/Product/GetProductsById', {\n        headers: {\n          Authorization: `Bearer ${token}` // Incluez le token JWT dans les en-têtes de la requête\n        }\n      });\n      dispatch({\n        type: FETCH_Pdts,\n        payload: response.data\n      });\n    } catch (error) {\n      console.error('Error fetching Produits:', error);\n    }\n  };\n};\n\n"],"mappings":"AAAA;AACA,SAASA,OAAO,EAAEC,UAAU,EAACC,SAAS,EAAEC,eAAe,EAAEC,eAAe,QAAQ,wBAAwB;AACxG,OAAOC,KAAK,MAAM,OAAO;AAGzB,OAAO,MAAMC,KAAK,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,IAAI,KAAK;EACjD,OAAO,MAAOC,QAAQ,IAAK;IACzB,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAAC,uCAAuC,EAAE;QACzEL,QAAQ;QACRC,QAAQ;QACRC;MACF,CAAC,CAAC;MACF,IAAIE,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;QAC3B,MAAMC,KAAK,GAAGH,QAAQ,CAACI,IAAI,CAACD,KAAK;QACjCJ,QAAQ,CAACM,QAAQ,CAACF,KAAK,CAAC,CAAC;QACzBG,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEC,QAAQ,CAAC,CAAC,CAAC;MAC3D;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MACzC;IACF;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMJ,QAAQ,GAAIF,KAAK,IAAK;EACjC,OAAO;IACLO,IAAI,EAAEnB,SAAS;IACfoB,OAAO,EAAER;EACX,CAAC;AACH,CAAC;AAED,OAAO,MAAMS,MAAM,GAAIC,OAAO,IAAK;EACjC,OAAO;IACLH,IAAI,EAAErB,OAAO;IACbsB,OAAO,EAAEE;EACX,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMC,QAAQ,GAAIX,KAAK,IAAK;EACjC,OAAO,MAAOJ,QAAQ,IAAK;IACzB,IAAI;MACF;MACA,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACqB,GAAG,CAAC,oDAAoD,EAAE;QACrFC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASd,KAAM,EAAC,CAAC;QACnC;MACF,CAAC,CAAC;MACFJ,QAAQ,CAAC;QACPW,IAAI,EAAEpB,UAAU;QAChBqB,OAAO,EAAEX,QAAQ,CAACI;MACpB,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAClD;EACF,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}