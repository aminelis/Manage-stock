{"ast":null,"code":"// reunionActions.js\nimport { ADD_PDT, FETCH_Pdts, SET_TOKEN, DELETE_REUNIONS, UPDATE_REUNIONS } from '../constants/constants';\nimport axios from 'axios';\nexport const Login = (username, password, role) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post('https://localhost:7013/api/Auth/login', {\n        username,\n        password,\n        role\n      }, {\n        timeout: 100000 // Délai d'attente de 10 secondes\n      });\n      if (response.status === 200) {\n        const token = response.data.token;\n        dispatch(setToken(token));\n        console.log('New state after setting token:', token);\n      } else {\n        // Si la réponse n'est pas 200, quelque chose s'est mal passé\n        throw new Error('Invalid response status: ' + response.status);\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      throw error; // Lancer explicitement l'erreur pour la propager\n    }\n  };\n};\n_c = Login;\nexport const setToken = token => {\n  return {\n    type: SET_TOKEN,\n    payload: token\n  };\n};\nexport const addPdt = product => {\n  return {\n    type: ADD_PDT,\n    payload: product\n  };\n};\n\n// Action creator pour récupérer les réunions depuis l'API\nexport const fetchPdt = token => {\n  return async dispatch => {\n    try {\n      // Effectuez votre appel à l'API ici\n      const response = await axios.get('https://localhost:7013/api/Product/GetProductsById', {\n        headers: {\n          Authorization: `Bearer ${token}` // Incluez le token JWT dans les en-têtes de la requête\n        }\n      });\n      dispatch({\n        type: FETCH_Pdts,\n        payload: response.data\n      });\n    } catch (error) {\n      console.error('Error fetching Produits:', error);\n    }\n  };\n};\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["ADD_PDT","FETCH_Pdts","SET_TOKEN","DELETE_REUNIONS","UPDATE_REUNIONS","axios","Login","username","password","role","dispatch","response","post","timeout","status","token","data","setToken","console","log","Error","error","_c","type","payload","addPdt","product","fetchPdt","get","headers","Authorization","$RefreshReg$"],"sources":["/home/amine/product-list/src/Actions/PdtActions.js"],"sourcesContent":["// reunionActions.js\nimport { ADD_PDT, FETCH_Pdts,SET_TOKEN, DELETE_REUNIONS, UPDATE_REUNIONS } from '../constants/constants';\nimport axios from 'axios';\n\n\nexport const Login = (username, password, role) => {\n  return async (dispatch) => {\n    try {\n      const response = await axios.post('https://localhost:7013/api/Auth/login', {\n        username,\n        password,\n        role\n      }, {\n        timeout: 100000 // Délai d'attente de 10 secondes\n      });\n      \n      if (response.status === 200) {\n        const token = response.data.token;\n        dispatch(setToken(token));\n        console.log('New state after setting token:', token);\n      } else {\n        // Si la réponse n'est pas 200, quelque chose s'est mal passé\n        throw new Error('Invalid response status: ' + response.status);\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      throw error; // Lancer explicitement l'erreur pour la propager\n    }\n  };\n};\n\n\nexport const setToken = (token) => {\n  return {\n    type: SET_TOKEN,\n    payload: token\n  };\n};\n\nexport const addPdt = (product) => {\n  return {\n    type: ADD_PDT,\n    payload: product,\n  };\n};\n\n// Action creator pour récupérer les réunions depuis l'API\nexport const fetchPdt = (token) => {\n  return async (dispatch) => {\n    try {\n      // Effectuez votre appel à l'API ici\n      const response = await axios.get('https://localhost:7013/api/Product/GetProductsById', {\n        headers: {\n          Authorization: `Bearer ${token}` // Incluez le token JWT dans les en-têtes de la requête\n        }\n      });\n      dispatch({\n        type: FETCH_Pdts,\n        payload: response.data\n      });\n    } catch (error) {\n      console.error('Error fetching Produits:', error);\n    }\n  };\n};\n\n"],"mappings":"AAAA;AACA,SAASA,OAAO,EAAEC,UAAU,EAACC,SAAS,EAAEC,eAAe,EAAEC,eAAe,QAAQ,wBAAwB;AACxG,OAAOC,KAAK,MAAM,OAAO;AAGzB,OAAO,MAAMC,KAAK,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,IAAI,KAAK;EACjD,OAAO,MAAOC,QAAQ,IAAK;IACzB,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAAC,uCAAuC,EAAE;QACzEL,QAAQ;QACRC,QAAQ;QACRC;MACF,CAAC,EAAE;QACDI,OAAO,EAAE,MAAM,CAAC;MAClB,CAAC,CAAC;MAEF,IAAIF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;QAC3B,MAAMC,KAAK,GAAGJ,QAAQ,CAACK,IAAI,CAACD,KAAK;QACjCL,QAAQ,CAACO,QAAQ,CAACF,KAAK,CAAC,CAAC;QACzBG,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEJ,KAAK,CAAC;MACtD,CAAC,MAAM;QACL;QACA,MAAM,IAAIK,KAAK,CAAC,2BAA2B,GAAGT,QAAQ,CAACG,MAAM,CAAC;MAChE;IACF,CAAC,CAAC,OAAOO,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MACzC,MAAMA,KAAK,CAAC,CAAC;IACf;EACF,CAAC;AACH,CAAC;AAACC,EAAA,GAxBWhB,KAAK;AA2BlB,OAAO,MAAMW,QAAQ,GAAIF,KAAK,IAAK;EACjC,OAAO;IACLQ,IAAI,EAAErB,SAAS;IACfsB,OAAO,EAAET;EACX,CAAC;AACH,CAAC;AAED,OAAO,MAAMU,MAAM,GAAIC,OAAO,IAAK;EACjC,OAAO;IACLH,IAAI,EAAEvB,OAAO;IACbwB,OAAO,EAAEE;EACX,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMC,QAAQ,GAAIZ,KAAK,IAAK;EACjC,OAAO,MAAOL,QAAQ,IAAK;IACzB,IAAI;MACF;MACA,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACuB,GAAG,CAAC,oDAAoD,EAAE;QACrFC,OAAO,EAAE;UACPC,aAAa,EAAG,UAASf,KAAM,EAAC,CAAC;QACnC;MACF,CAAC,CAAC;MACFL,QAAQ,CAAC;QACPa,IAAI,EAAEtB,UAAU;QAChBuB,OAAO,EAAEb,QAAQ,CAACK;MACpB,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAClD;EACF,CAAC;AACH,CAAC;AAAC,IAAAC,EAAA;AAAAS,YAAA,CAAAT,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}